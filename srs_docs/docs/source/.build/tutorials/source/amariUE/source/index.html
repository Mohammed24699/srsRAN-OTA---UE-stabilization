<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>srsRAN gNB with Amarisoft UE &mdash; srsRAN Project  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=a5c4661c" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css?v=257617e2" />

  
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../../../_static/doctools.js?v=888ff710"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../../../_static/copybutton.js?v=f281be69"></script>
        <script src="../../../../_static/js/hoverxref.js"></script>
        <script src="../../../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../../../_static/js/micromodal.min.js"></script>
        <script src="../../../../_static/tabs.js?v=3030b3cb"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="srsRAN gNB on Kubernetes" href="../../k8s/source/index.html" />
    <link rel="prev" title="srsRAN gNB with COTS UEs" href="../../cotsUE/source/index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            srsRAN Project
              <img src="../../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../general/source/1_getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../general/source/2_features_and_roadmap.html">Features and Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/2_features_and_roadmap.html#current-features">Current Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/2_features_and_roadmap.html#coming-soon">Coming Soon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../general/source/3_contributions.html">Contribution Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/3_contributions.html#faq">FAQ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../general/source/3_contributions.html#what-is-a-copyright-license-agreement-cla-and-why-do-i-need-one">1. What is a Copyright License Agreement (CLA) and why do I need one?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../general/source/3_contributions.html#how-do-i-complete-and-submit-the-cla">2. How do I complete and submit the CLA?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../general/source/3_contributions.html#how-will-my-contributions-to-the-srsran-project-be-used">3. How will my contributions to the srsRAN Project be used?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../general/source/3_contributions.html#if-i-do-not-own-the-copyright-in-the-entire-work-of-authorship">4. If I do not own the copyright in the entire work of authorship?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../general/source/4_reporting.html">Reporting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/4_reporting.html#issues">Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/4_reporting.html#vulnerabilities">Vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/4_reporting.html#support">Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../general/source/5_release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/5_release_notes.html#id1">23.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/5_release_notes.html#id2">23.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../general/source/5_release_notes.html#initial-public-release">23.3 (initial public release)</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/installation.html">Installation Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/installation.html#build-tools-and-dependencies">Build Tools and Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/installation.html#rf-drivers">RF-drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/installation.html#clone-and-build">Clone and Build</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/installation.html#packages">Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/installation.html#ubuntu">Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/installation.html#arch-linux">Arch Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/installation.html#phy-testvectors">PHY testvectors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/running.html">Running srsRAN Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/running.html#baseline-requirements">Baseline Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/running.html#system-preparation">System Preparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/running.html#running-the-gnb">Running the gNB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/console_ref.html">Console Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/outputs.html">Outputs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#logs">Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#pcaps">PCAPs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#mac">MAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#rlc">RLC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#ngap">NGAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#gtp-u">GTP-U</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#e1ap">E1AP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#f1ap">F1AP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/outputs.html#e2ap">E2AP</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/config_ref.html">Configuration Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/config_ref.html#format">Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/config_ref.html#configuration-parameters">Configuration Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html">Grafana Metrics GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html#id2">Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html#srsran">srsRAN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html#launching-gui">Launching GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/grafana_gui.html#gui-output">GUI Output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html#performance-tuning">Performance Tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html#cpu-performance-mode">CPU Performance Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html#performance-configuration-script">Performance Configuration Script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html#usrp-configuration">USRP Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../user_manuals/source/troubleshooting.html#usrp-time-calibration">USRP Time Calibration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developers Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/index.html">Software Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/CU_cp/source/index.html">CU-CP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/CU_up/source/index.html">CU-UP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/index.html">DU-high</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/du_manager.html">DU Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/rlc.html">Radio Link Control (RLC)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/rlc_am.html">RLC Acknowledged Mode (AM)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/mac.html">MAC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/mac.html#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_high/source/mac.html#ra-procedure">RA Procedure</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/software_arch/source/DU_low/source/index.html">DU-low</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/index.html">Code Style Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/1_language_libraries.html">Language and libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/1_language_libraries.html#c-c-version">C &amp; C++ version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/1_language_libraries.html#use-of-the-c-standard-library">Use of the C++ standard library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html">Mechanical source aspects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#source-code-formatting">Source Code Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#comments">Comments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#comment-guidelines">Comment Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#file-headers">File Headers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#header-guards">Header Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#include-style">#include Style</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#language-and-compiler-aspects">Language and compiler aspects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#treat-compiler-warnings-as-errors">Treat compiler warnings as errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#code-portability">Code Portability</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#avoid-rtti-and-exceptions">Avoid RTTI and Exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/2_mechanical_source_aspects.html#use-of-auto">Use of auto</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html">Style Aspects: High Level Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#self-contained-headers">Self-contained Headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#using-include-sparingly">Using <code class="docutils literal notranslate"><span class="pre">#include</span></code> Sparingly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#using-internal-headers">Using “Internal” Headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#use-of-namespace">Use of <code class="docutils literal notranslate"><span class="pre">namespace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#using-early-exits-and-continue">Using “early exits” and <code class="docutils literal notranslate"><span class="pre">continue</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#avoid-else-after-a-return-statement">Avoid <code class="docutils literal notranslate"><span class="pre">else</span></code> after a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/3_style_aspects_high_level.html#use-of-static-helper-functions">Use of Static Helper Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html">Style Aspects: Low Level Issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#naming-conventions">Naming Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#assert-and-expect">Assert and expect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#do-not-use-using-namespace-std">Do not use <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">namespace</span> <span class="pre">std</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#using-range-for-loops">Using Range for Loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#loop-structure">Loop Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#using-pre-increment">Using Pre-increment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#use-of-anonymous-namespaces">Use of Anonymous Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/4_style_aspects_low_level.html#using-c-casts">Using C++ Casts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html">Recommendations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#function-and-class-length">Function and Class Length</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#scope">Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#logical-operators">Logical Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#using-references-over-pointers">Using References(&amp;) Over Pointers(*)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#const-correctness">Const Correctness</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#avoid-complex-expressions">Avoid Complex Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#magic-numbers">Magic numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#fixed-width-integer-types">Fixed Width Integer Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#function-signatures">Function signatures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/5_recommendations.html#class-layout-example">Class Layout Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html">Self Generating Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html#general-aspects">General Aspects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html#files">Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html#classes-and-structures">Classes and Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html#class-methods-and-free-functions">Class Methods and Free Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/6_self_generating_docs.html#class-data-members-objects-variables">Class Data Members, Objects, Variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/code_guide/source/7_commit_formatting.html">Commit Formatting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev_guide/source/testing_policy/source/index.html">Testing Policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/testing_policy/source/index.html#unit-tests">Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/testing_policy/source/index.html#integration-and-component-tests">Integration and Component Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/testing_policy/source/index.html#end-to-end-e2e-tests">End-to-End (E2E) Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../dev_guide/source/testing_policy/source/index.html#exploratory-tests">Exploratory Tests</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Knowledge Base</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge_base/source/oran_gnb/source/index.html">O-RAN gNB Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/oran_gnb/source/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/oran_gnb/source/index.html#split-7-2x-architecture">Split 7.2x Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/oran_gnb/source/index.html#srsran-project-gnb">srsRAN Project gNB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/oran_gnb/source/index.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge_base/source/gnb_components/source/index.html">O-RAN gNB Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_components/source/index.html#centralized-unit-cu">Centralized Unit (CU)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_components/source/index.html#distributed-unit-du">Distributed Unit (DU)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_components/source/index.html#du-high">DU-high</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_components/source/index.html#du-low">DU-low</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html">gNB Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#e1">E1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#e2">E2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#f1">F1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#f1-c">F1-C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#f1-u">F1-U</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#fapi">FAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#ng">NG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#ng-c">NG-C</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#ng-u">NG-U</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#o1">O1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/gnb_interfaces/source/index.html#open-fronthaul">Open FrontHaul</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../knowledge_base/source/cots_ues/source/index.html">COTS UEs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/cots_ues/source/index.html#tested-cots-ues">Tested COTS UEs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/cots_ues/source/index.html#user-reported-working-ues">User reported working UEs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/cots_ues/source/index.html#ue-capability-messages">UE Capability Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../knowledge_base/source/cots_ues/source/index.html#references">References</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../srsUE/source/index.html">srsRAN gNB with srsUE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#hardware-and-software-overview">Hardware and Software Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id2">srsRAN 4G</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#open5gs">Open5GS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id3">ZeroMQ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#over-the-air-setup">Over-the-air Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#gnb">gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#srsue">srsUE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#running-the-network">Running the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#open5gs-core">Open5GS Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id4">gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id5">srsUE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#testing-the-network">Testing the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#routing-configuration">Routing Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#ping">Ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#iperf3">iPerf3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#zeromq-based-setup">ZeroMQ-based Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id6">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id7">gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id8">srsUE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id9">Running the Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#zmq-testing">Testing the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#zmq-routing">Routing Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id12">Ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id13">iPerf3</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#multi-ue-emulation">Multi-UE Emulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id15">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#gnu-radio-companion">GNU-Radio Companion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id17">Open5GS Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id18">gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id19">srsUE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id20">Running the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id21">Open5GS Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id22">gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id23">srsUE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#id24">GNU-Radio Companion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../srsUE/source/index.html#path-loss-control">Path-loss Control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id25">Testing the Network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#performance-issues">Performance Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#reference-clock">Reference clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#g-qos-identifier">5G QoS Identifier</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#ue-does-not-get-ip-address">UE does not get IP address</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#ue-ip-forwarding">UE IP Forwarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#nd-open5gs-instance-installed-manually">2nd Open5GS instance (installed manually)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#usrp-x300-x310">USRP X300/X310</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../srsUE/source/index.html#id26">Limitations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../srsUE/source/index.html#id27">srsUE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cotsUE/source/index.html">srsRAN gNB with COTS UEs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#setup-considerations">Setup Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#open5gs">Open5GS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#cots-ue">COTS UE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#external-clock">External Clock</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#gnb">gNB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#isim">ISIM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#sim-programming">SIM Programming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#suci-configuration">SUCI Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#id1">Open5GS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#amf-yml">amf.yml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#upf-yml">upf.yml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#user-database">User Database</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#id4">COTS UE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#enable-isim-5g-and-data-roaming">Enable ISIM, 5G and data roaming</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#configure-apn">Configure APN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#force-nr">Force NR</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#connecting-the-cots-ue">Connecting the COTS UE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#setting-up-the-network">Setting-up the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#check-that-the-core-is-running-correctly">Check that the Core is running correctly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../cotsUE/source/index.html#run-the-gnb">Run the gNB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#connecting-to-the-network">Connecting to the Network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#traffic-and-testing">Traffic and Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#speed-test">Speed Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#video-test">Video Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#network-not-visible">Network Not Visible</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#unable-to-attach">Unable to Attach</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#no-internet-access">No Internet Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cotsUE/source/index.html#ue-disconnects-after-a-few-minutes">UE Disconnects after a few Minutes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cotsUE/source/index.html#tested-devices">Tested Devices</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">srsRAN gNB with Amarisoft UE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-and-software-overview">Hardware and Software Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Amarisoft UE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open5gs">Open5GS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">ZeroMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="#srsran-project-gnb">srsRAN Project gNB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Amarisoft UE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zeromq-driver-for-amarisoft-ue">ZeroMQ driver for Amarisoft UE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zeromq-based-setup">ZeroMQ-based Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">srsRAN Project gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Amarisoft UE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Open5GS 5G Core</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-5g-network">Running the 5G Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Open5gs 5G Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">srsRAN Project gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Amarisoft UE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#testing-the-network">Testing the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ping">Ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iperf">iPerf</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iperf-output">iPerf Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gnb-console-output">gNB Console Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#packet-capture">Packet Capture</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-amarisoft-for-multiple-ues">Configuring Amarisoft for multiple UEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#over-the-air-setup">Over-the-air Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">srsRAN Project gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Amarisoft UE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id14">Running the 5G Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">Open5gs 5G Core</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">srsRAN Project gNB</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Amarisoft UE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#amariue-radios-test">Testing the Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Ping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">iPerf</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">iPerf Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">gNB Console Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">Packet Capture</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#zmq-setup">ZMQ setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reference-clock-for-over-the-air">Reference clock for over-the-air</a></li>
<li class="toctree-l3"><a class="reference internal" href="#g-qos-identifier">5G QoS Identifier</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../k8s/source/index.html">srsRAN gNB on Kubernetes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#setup-considerations">Setup Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#cu-du">CU/DU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#ru">RU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#g-core">5G Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#clocking-synchronization">Clocking &amp; Synchronization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#switch">Switch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#kubernetes-worker-node">Kubernetes Worker Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#nic-configuration">NIC Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#ptp-grandmaster">PTP Grandmaster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#helm-charts">Helm Charts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#linuxptp-helm-chart">LinuxPTP Helm Chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#srsran-project-helm-chart">srsRAN Project Helm Chart</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#core">Core</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#initializing-the-network">Initializing the Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#ru-1">RU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#core-1">Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../k8s/source/index.html#du">DU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#ptp">PTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../k8s/source/index.html#id7">CU/DU</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#connecting-to-the-network">Connecting to the Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../k8s/source/index.html#supported-o-rus">Supported O-RUs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dpdk/source/index.html">srsRAN gNB with DPDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../dpdk/source/index.html#introduction">Introduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dpdk/source/index.html#further-reading">Further Reading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dpdk/source/index.html#installing-dpdk">Installing DPDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dpdk/source/index.html#configuring-dpdk">Configuring DPDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../dpdk/source/index.html#configure-hugepages">Configure Hugepages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dpdk/source/index.html#binding-to-dpdk">Binding to DPDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dpdk/source/index.html#id2">EAL Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../dpdk/source/index.html#running-srsran-with-dpdk">Running srsRAN with DPDK</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../oranRU/source/index.html">O-RAN 7.2 RU Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#setup-considerations">Setup Considerations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#cu-du">CU/DU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#ru">RU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#g-core">5G Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#synchronization">Synchronization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/index.html#switch">Switch</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#id1">Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#id2">CU/DU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/index.html#nic-configuration">NIC configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/index.html#ptp-configuration">PTP configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/index.html#srsran-configuration">srsRAN configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#id4">RU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#core">Core</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#initializing-the-network">Initializing the Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#id5">RU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#id6">CU/DU</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#connecting-to-the-network">Connecting to the Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#cots-ue">COTS UE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/index.html#amariue">AmariUE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/index.html#sending-traffic">Sending Traffic</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../oranRU/source/index.html#integration-guide">Integration Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/hw_integration.html">RUs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/rus/r550.html">Benetel R550</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../oranRU/source/hw_integration.html#switches">Switches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../oranRU/source/switches/falcon.html">Falcon-RX Switch</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../flexric/source/index.html">O-RAN NearRT-RIC and xApp</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#setup-overview">Setup Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#hardware-and-software-overview">Hardware and Software Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#id2">FlexRIC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#open5gs">Open5GS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#id5">ZeroMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#id6">srsRAN Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#srsue">srsUE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#gnb">gNB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#running-the-network">Running the Network</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#open5gs-core">Open5GS Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#nearrt-ric">NearRT-RIC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#id7">gNB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#id8">srsUE</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#ip-traffic-with-ping">IP Traffic with ping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#xapp">xApp</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#e2ap-packet-analyzer">E2AP packet analyzer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#enable-e2ap-pcap">Enable E2AP PCAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#live-capture">Live capture</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../flexric/source/index.html#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#pcap">PCAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#core-network-not-running">Core Network not running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#ue-issues">UE issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#ue-ip-forwarding">UE IP Forwarding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#nd-open5gs-instance-installed-manually">2nd Open5GS instance (installed manually)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../flexric/source/index.html#ric-running-on-a-different-machine">RIC running on a different machine</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../matlab/source/index.html">MATLAB Testing Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../matlab/source/index.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../matlab/source/index.html#test-vector-generation">Test Vector Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../matlab/source/index.html#signal-analyzers">Signal Analyzers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../matlab/source/index.html#simulators">Simulators</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../matlab/source/index.html#set-up-considerations">Set-Up Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlab/source/index.html#installation">Installation</a></li>
</ul>
</li>
</ul>


    
        <p class="caption">
            <span class="caption-text">
            
                Links
            
            </span>
        </p>
        <ul>
            
                
                    <li class="toctree-l1"><a href="https://www.srsran.com"><i class="web-icon"></i> Website</a></li>
                
            
                
                    <li class="toctree-l1"><a href="https://github.com/srsran/srsran_project"><i class="fa fa-github fa-fw"></i> Source code</a></li>
                
            
                
                    <li class="toctree-l1"><a href="https://github.com/srsran/srsran_project/issues"><i class="fa fa-bug fa-fw"></i> Report an issue</a></li>
                
            
                
                    <li class="toctree-l1"><a href="https://github.com/srsran/srsran_project/discussions"><i class="fa fa-envelope fa-fw"></i> Discussions Board</a></li>
                
            
                
                    <li class="toctree-l1"><a href="https://twitter.com/srsRANProject"><i class="fa fa-twitter fa-fw"></i> Twitter</a></li>
                
            
        </ul>
    


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">srsRAN Project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">srsRAN gNB with Amarisoft UE</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/tutorials/source/amariUE/source/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../../cotsUE/source/index.html" class="btn btn-neutral float-left" title="srsRAN gNB with COTS UEs" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../k8s/source/index.html" class="btn btn-neutral float-right" title="srsRAN gNB on Kubernetes" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="srsran-gnb-with-amarisoft-ue">
<span id="amariue-tutorial"></span><h1>srsRAN gNB with Amarisoft UE<a class="headerlink" href="#srsran-gnb-with-amarisoft-ue" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The Amarisoft UE simulator (AmariUE) is a commercial software radio solution that supports the simluation of up to 1000s of UE devices.
This tutorial outlines how the AmariUE can be used to test and exercise srsRAN gNB. In this example, we will use the open5GS core network to complete the end-to-end 5G network.
Usually the gNB and UE connect with each other using physical radios for over-the-air transmissions. However, srsRAN gNB also includes support for virtual radios, which
use the ZeroMQ networking library to transfer radio samples between applications. This approach is very useful for development, testing, debugging, CI/CD or for teaching and demonstrating.</p>
<p>This tutorial details two example setups: connecting the srsRAN gNB to AmariUE using virtual radios (ZMQ), and using physical radios (USRP B210).</p>
</section>
<hr class="docutils" />
<section id="hardware-and-software-overview">
<h2>Hardware and Software Overview<a class="headerlink" href="#hardware-and-software-overview" title="Link to this heading"></a></h2>
<p>For this application note, the following hardware and software are used:</p>
<blockquote>
<div><ul class="simple">
<li><p>PC with Ubuntu 22.04.2</p></li>
<li><p><a class="reference external" href="https://github.com/srsran/srsRAN_project">srsRAN Project</a></p></li>
<li><p><a class="reference external" href="https://www.amarisoft.com/technology/ue-simulator/">Amarisoft UE</a>  (2021-09-18 or later)</p></li>
<li><p><a class="reference external" href="https://www.ettus.com/all-products/ub210-kit/">Two Ettus Research USRP B210s</a> (connected over USB3)</p></li>
<li><p><a class="reference external" href="https://open5gs.org/">Open5GS 5G Core</a></p></li>
<li><p><a class="reference external" href="https://zeromq.org/">ZeroMQ</a></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ideally the USRPs would be connected to a 10 MHz external reference clock or GPSDO, although this is not a strict requirement. We recommend the <a class="reference external" href="http://www.leobodnar.com/shop/index.php?main_page=product_info&amp;cPath=107&amp;products_id=234&amp;zenid=5194baec39dbc91212ec4ac755a142b6">Leo Bodnar GPSDO</a>.</p>
</div>
<section id="id1">
<h3>Amarisoft UE<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>Amarisoft UE simulator (AmariUE) is a commercial solution that supports functional and performance testing of 5G networks.
Acting as a 3GPP compliant LTE, NB-IOT and NR UE, it can simulate hundreds of UEs sharing the same spectrum. For more information visit the <a class="reference external" href="https://www.amarisoft.com/">Amarisoft website</a>.</p>
</section>
<section id="open5gs">
<h3>Open5GS<a class="headerlink" href="#open5gs" title="Link to this heading"></a></h3>
<p>For this example we are using Open5GS as the 5G Core.</p>
<p>Open5GS is a C-language Open Source implementation for 5G Core and EPC. The following links will provide you
with the information needed to download and setup Open5GS so that it is ready to use with srsRAN 4G:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/open5gs/open5gs">GitHub</a></p></li>
<li><p><a class="reference external" href="https://open5gs.org/open5gs/docs/guide/01-quickstart/">Quickstart Guide</a></p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tutorial assumes that the 5G Core Network is running on a different machine than the machine running Amarisoft UE.</p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<section id="id2">
<h3>ZeroMQ<a class="headerlink" href="#id2" title="Link to this heading"></a></h3>
<p>First thing is to install ZeroMQ and build srsRAN. On Ubuntu, ZeroMQ development libraries can be installed
with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libzmq3-dev
</pre></div>
</div>
<p>Alternatively, installing from sources can also be done.</p>
<p>First, one needs to install libzmq:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/zeromq/libzmq.git
<span class="nb">cd</span><span class="w"> </span>libzmq
./autogen.sh
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>ldconfig
</pre></div>
</div>
<p>Second, install czmq:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/zeromq/czmq.git
<span class="nb">cd</span><span class="w"> </span>czmq
./autogen.sh
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
sudo<span class="w"> </span>ldconfig
</pre></div>
</div>
</section>
<section id="srsran-project-gnb">
<h3>srsRAN Project gNB<a class="headerlink" href="#srsran-project-gnb" title="Link to this heading"></a></h3>
<p>Once ZeroMQ is installed, you need to compile srsRAN (assuming you have already installed all the required dependencies).
Note, if you have already built and installed srsRAN prior to installing ZMQ and other dependencies you
will have to re-run the make command to ensure srsRAN recognizes the addition of ZMQ:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/srsran/srsRAN_Project.git
<span class="nb">cd</span><span class="w"> </span>srsRAN_Project
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>../<span class="w"> </span>-DENABLE_EXPORT<span class="o">=</span>ON<span class="w"> </span>-DENABLE_ZEROMQ<span class="o">=</span>ON
make<span class="w"> </span>-j<span class="sb">`</span>nproc<span class="sb">`</span>
</pre></div>
</div>
<p>ZeroMQ is disabled by default, this is enabled when running <code class="docutils literal notranslate"><span class="pre">cmake</span></code> by including <code class="docutils literal notranslate"><span class="pre">-DENABLE_EXPORT=ON</span> <span class="pre">-DENABLE_ZEROMQ=ON</span></code>.</p>
<p>Pay extra attention to the cmake console output. Make sure you read the following line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>...
--<span class="w"> </span>FINDING<span class="w"> </span>ZEROMQ.
--<span class="w"> </span>Checking<span class="w"> </span><span class="k">for</span><span class="w"> </span>module<span class="w"> </span><span class="s1">&#39;ZeroMQ&#39;</span>
--<span class="w">   </span>No<span class="w"> </span>package<span class="w"> </span><span class="s1">&#39;ZeroMQ&#39;</span><span class="w"> </span>found
--<span class="w"> </span>Found<span class="w"> </span>libZEROMQ:<span class="w"> </span>/usr/local/include,<span class="w"> </span>/usr/local/lib/libzmq.so
...
</pre></div>
</div>
</section>
<section id="id3">
<h3>Amarisoft UE<a class="headerlink" href="#id3" title="Link to this heading"></a></h3>
<p>Download the appropriate version of Amarisoft UE and install as per steps provided in its install guide.</p>
<p>This tutorial uses version 2023-02-06 of Amarisoft UE, but it can be any version above 2021-09-18.</p>
</section>
<section id="zeromq-driver-for-amarisoft-ue">
<h3>ZeroMQ driver for Amarisoft UE<a class="headerlink" href="#zeromq-driver-for-amarisoft-ue" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These steps should only be completed <strong>after</strong> compiling srsRAN Project gNB as mentioned above, as they require the build files of srsRAN Project gNB and Amarisoft UHD RF frontend driver.</p>
</div>
<p>Interfacing the Amarisoft UE with srsRAN Project requires a custom TRX driver implemented by SRS, which can be found in the srsRAN Project source files in <code class="docutils literal notranslate"><span class="pre">srsRAN_Project/utils/trx_srsran</span></code>.</p>
<p>The Amarisoft UE release folder, <code class="docutils literal notranslate"><span class="pre">amarisoft.2023-02-06.tar.gz</span></code>, should contain a file called <code class="docutils literal notranslate"><span class="pre">trx_uhd-linux-2023-02-06.tar.gz</span></code>. The release folder and the sub-file in question should be uncompressed before proceeding.</p>
<p>First, the driver needs to be compiled, do this by running the following commands from <code class="docutils literal notranslate"><span class="pre">srsRAN_Project/build</span></code> :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>../<span class="w"> </span>-DENABLE_EXPORT<span class="o">=</span>TRUE<span class="w"> </span>-DENABLE_ZEROMQ<span class="o">=</span>TRUE<span class="w"> </span>-DENABLE_TRX_DRIVER<span class="o">=</span>TRUE<span class="w"> </span>-DTRX_DRIVER_DIR<span class="o">=</span>&lt;PATH<span class="w"> </span>TO<span class="w"> </span>trx_uhd-linux-2023-02-06&gt;
make<span class="w"> </span>trx_srsran_test
ctest<span class="w"> </span>-R<span class="w"> </span>trx_srsran_test
</pre></div>
</div>
<p>Make sure CMake finds the file <code class="docutils literal notranslate"><span class="pre">trx_driver.h</span></code> in the specified folder. CMake should print the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--<span class="w"> </span>Found<span class="w"> </span>trx_driver.h<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">TRX_DRIVER_DIR</span><span class="o">=</span>/home/user/amarisoft/2021-03-15/trx_uhd-linux-2021-03-15/trx_driver.h
</pre></div>
</div>
<p>A symbolic link must be done for the UE application to load the driver. From the Amarisoft UE build folder run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ln<span class="w"> </span>-s<span class="w"> </span>srsRAN_Project/build/utils/trx_srsran/libtrx_srsran.so<span class="w"> </span>trx_srsran.so
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="zeromq-based-setup">
<h2>ZeroMQ-based Setup<a class="headerlink" href="#zeromq-based-setup" title="Link to this heading"></a></h2>
<p>In this section, we describe the steps required to configure the ZMQ-based RF driver in both gNB and AmariUE.
The following diagram presents the setup architecture:</p>
<figure class="align-center">
<img alt="../../../../_images/zmq_amariue.png" src="../../../../_images/zmq_amariue.png" />
</figure>
<section id="configuration">
<h3>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h3>
<p>The following config files were modified to use ZMQ-based RF driver:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../../../_downloads/45863dffd8633350c00f0ecf90694601/gnb_zmq_fdd_n7_10mhz.yml"><code class="xref download docutils literal notranslate"><span class="pre">gNB</span> <span class="pre">FDD</span> <span class="pre">band</span> <span class="pre">7</span> <span class="pre">config</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/372246dc7e384064b98f5b5eee06e6dc/gnb_zmq_tdd_n78_10mhz.yml"><code class="xref download docutils literal notranslate"><span class="pre">gNB</span> <span class="pre">TDD</span> <span class="pre">band</span> <span class="pre">78</span> <span class="pre">config</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/90e49b71d2f81d882d1173a1f8a2d357/ue-nr-sa-fdd-n7-zmq-single-ue.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Single</span> <span class="pre">UE</span> <span class="pre">config</span> <span class="pre">FDD</span> <span class="pre">band</span> <span class="pre">7</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/eaf3c3e6489d915001bb4cd103609ee4/ue-nr-sa-tdd-n78-zmq-single-ue.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Single</span> <span class="pre">UE</span> <span class="pre">config</span> <span class="pre">TDD</span> <span class="pre">band</span> <span class="pre">78</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/2a393cd202a4651ff2a16f5b7b80cfa4/ue-nr-sa-fdd-n7-zmq-multiple-ues.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Multiple</span> <span class="pre">UEs</span> <span class="pre">config</span> <span class="pre">FDD</span> <span class="pre">band</span> <span class="pre">7</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/b1c8d795f0d7deef2005a0eac4b50fdf/ue-nr-sa-tdd-n78-zmq-multiple-ues.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Multiple</span> <span class="pre">UEs</span> <span class="pre">config</span> <span class="pre">TDD</span> <span class="pre">band</span> <span class="pre">78</span></code></a></p></li>
</ul>
</div></blockquote>
<p>Details of the modifications made are outlined in following sections.</p>
<section id="id4">
<h4>srsRAN Project gNB<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">amf</span></code> section with IP of AMF and IP to which gNB need to bind in order to connect to AMF:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">amf</span><span class="p">:</span>
<span class="w">  </span><span class="nt">addr</span><span class="p">:</span><span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">172.22.0.10</span>
<span class="w">  </span><span class="nt">bind_addr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">172.22.0.1</span>
</pre></div>
</div>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">ru_sdr</span></code> section with IPs from which gNB sends and receives radio samples via ZMQ driver:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ru_sdr</span><span class="p">:</span>
<span class="w">  </span><span class="nt">device_driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">zmq</span>
<span class="w">  </span><span class="nt">device_args</span><span class="p">:</span><span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">tx_port=tcp://10.53.1.1:5000,rx_port=tcp://10.53.1.2:6000</span>
</pre></div>
</div>
</section>
<section id="id5">
<h4>Amarisoft UE<a class="headerlink" href="#id5" title="Link to this heading"></a></h4>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">ru_sdr</span></code> section of Amarisoft UE configuration with IPs from which UE sends and receives radio samples via ZMQ driver:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">ru_sdr</span><span class="o">:</span><span class="w"> </span><span class="s">{</span>
<span class="w">  </span><span class="na">name</span><span class="o">:</span><span class="w">      </span><span class="s">&quot;srsran&quot;,</span>
<span class="w">  </span><span class="na">args</span><span class="o">:</span><span class="w">      </span><span class="s">&quot;&quot;,</span>
<span class="w">  </span><span class="na">tx_port0</span><span class="o">:</span><span class="w">  </span><span class="s">&quot;tcp://10.53.1.2:6000&quot;,</span>
<span class="w">  </span><span class="na">rx_port0</span><span class="o">:</span><span class="w">  </span><span class="s">&quot;tcp://10.53.1.1:5000&quot;,</span>
<span class="w">  </span><span class="na">log_level</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;info&quot;</span>
<span class="na">},</span>
</pre></div>
</div>
<p>Then, set the gain parameters as follows:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">tx_gain</span><span class="o">:</span><span class="w"> </span><span class="s">0,</span>
<span class="na">rx_gain</span><span class="o">:</span><span class="w"> </span><span class="s">0,</span>
</pre></div>
</div>
<p>Make sure the CELL_BANDWIDTH matches that on gNB configuration file:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1">#define CELL_BANDWIDTH 10</span>
</pre></div>
</div>
<p>Add <code class="docutils literal notranslate"><span class="pre">sample_rate:</span> <span class="pre">61.44,</span></code> in the cell entry under <code class="docutils literal notranslate"><span class="pre">cells</span></code> section:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">sample_rate</span><span class="o">:</span><span class="w"> </span><span class="s">61.44,</span>
</pre></div>
</div>
<p>Then, set <code class="docutils literal notranslate"><span class="pre">N_ANTENNA_DL</span></code> to 1:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1">#define N_ANTENNA_DL 1</span>
</pre></div>
</div>
<p>Note that the following (default) SIM Credentials and APN are used:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">sim_algo</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;milenage&quot;,</span>
<span class="na">imsi</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;001019123456799&quot;,</span>
<span class="na">K</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;00112233445566778899aabbccddeeff&quot;,</span>
<span class="na">opc</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;63bfa50ee6523365ff14c1f45f88737d&quot;,</span>
<span class="na">apn</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;internet&quot;,</span>
</pre></div>
</div>
</section>
<section id="id6">
<h4>Open5GS 5G Core<a class="headerlink" href="#id6" title="Link to this heading"></a></h4>
<p>As highlighted above, the Open5GS <a class="reference external" href="https://open5gs.org/open5gs/docs/guide/01-quickstart/">Quickstart Guide</a> provides a comprehensive overview of how to configure Open5GS to run as a 5G Core.</p>
<p>The main modifications needed are:</p>
<blockquote>
<div><ul class="simple">
<li><p>Change the TAC in the AMF config to 7</p></li>
<li><p>Check that the NGAP, and GTPU addresses are all correct. This is done in the AMF and UPF config files.</p></li>
<li><p>It is also a good idea to make sure the PLMN values are consistent across all of the above files and the UE config file.</p></li>
</ul>
</div></blockquote>
<p>The final step is to register the UE to the list of subscribers through the Open5GS WebUI. The values for each field should match what is in the Amarisoft UE config file, under the <code class="docutils literal notranslate"><span class="pre">ue_list</span></code> section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to correctly configure the APN, if this is not done correctly the UE will not connect to the internet.</p>
</div>
<p>It is important to run Amarisoft UE and 5G Core in different machine or at least in different network namespaces. This is because both the 5GC and UE will be sharing the same network configuration,
i.e. routing tables etc. Because the UE receives an IP address from the 5GC’s subnet, the Linux kernel would bypass the TUN interfaces when routing traffic between both ends.</p>
</section>
</section>
<section id="running-the-5g-network">
<h3>Running the 5G Network<a class="headerlink" href="#running-the-5g-network" title="Link to this heading"></a></h3>
<p>The following order should be used when running the network:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>5GC</p></li>
<li><p>gNB</p></li>
<li><p>UE</p></li>
</ol>
</div></blockquote>
<section id="id8">
<h4>Open5gs 5G Core<a class="headerlink" href="#id8" title="Link to this heading"></a></h4>
<p>Once the steps from the Open5GS Quickstart Guide are followed you do not need to do any more to bring the core online. It will run in the background. Make sure to restart the relevant daemons after
making any changes to the config files.</p>
</section>
<section id="id9">
<h4>srsRAN Project gNB<a class="headerlink" href="#id9" title="Link to this heading"></a></h4>
<p>Run the gNB from its build directory, using the configuration file provided:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./apps/gnb/gnb<span class="w"> </span>-c<span class="w"> </span>gnb_rf_zmq_fdd_n7_10mhz.yml
</pre></div>
</div>
<p>The console output should be similar to the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Available<span class="w"> </span>radio<span class="w"> </span>types:<span class="w"> </span>uhd<span class="w"> </span>and<span class="w"> </span>zmq.

--<span class="o">==</span><span class="w"> </span>srsRAN<span class="w"> </span>gNB<span class="w"> </span><span class="o">(</span>commit<span class="w"> </span>05beac11e<span class="o">)</span><span class="w"> </span><span class="o">==</span>--

Connecting<span class="w"> </span>to<span class="w"> </span>AMF<span class="w"> </span>on<span class="w"> </span><span class="m">172</span>.22.0.10:38412
Cell<span class="w"> </span><span class="nv">pci</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">bw</span><span class="o">=</span><span class="m">10</span><span class="w"> </span>MHz,<span class="w"> </span><span class="nv">dl_arfcn</span><span class="o">=</span><span class="m">536020</span><span class="w"> </span><span class="o">(</span>n7<span class="o">)</span>,<span class="w"> </span><span class="nv">dl_freq</span><span class="o">=</span><span class="m">2680</span>.1<span class="w"> </span>MHz,<span class="w"> </span><span class="nv">dl_ssb_arfcn</span><span class="o">=</span><span class="m">535930</span>,<span class="w"> </span><span class="nv">ul_freq</span><span class="o">=</span><span class="m">2560</span>.1<span class="w"> </span><span class="nv">MHz</span>

<span class="o">====</span><span class="w"> </span>gNodeB<span class="w"> </span><span class="nv">started</span><span class="w"> </span><span class="o">===</span>
Type<span class="w"> </span>&lt;t&gt;<span class="w"> </span>to<span class="w"> </span>view<span class="w"> </span>trace
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Connecting</span> <span class="pre">to</span> <span class="pre">AMF</span> <span class="pre">on</span> <span class="pre">172.22.0.10:38412</span></code> message indicates that gNB initiated a connection to the core.</p>
<p>If the connection attempt is successful, the following (or similar) will be displayed on the Open5GS console:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amf<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">04</span>/23<span class="w"> </span><span class="m">14</span>:38:26.459:<span class="w"> </span><span class="o">[</span>amf<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>gNB-N2<span class="w"> </span>accepted<span class="o">[</span><span class="m">172</span>.22.0.1<span class="o">]</span>:49428<span class="w"> </span><span class="k">in</span><span class="w"> </span>ng-path<span class="w"> </span>module<span class="w"> </span><span class="o">(</span>../src/amf/ngap-sctp.c:113<span class="o">)</span>
amf<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">04</span>/23<span class="w"> </span><span class="m">14</span>:38:26.459:<span class="w"> </span><span class="o">[</span>amf<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>gNB-N2<span class="w"> </span>accepted<span class="o">[</span><span class="m">172</span>.22.0.1<span class="o">]</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>master_sm<span class="w"> </span>module<span class="w"> </span><span class="o">(</span>../src/amf/amf-sm.c:741<span class="o">)</span>
amf<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">04</span>/23<span class="w"> </span><span class="m">14</span>:38:26.459:<span class="w"> </span><span class="o">[</span>amf<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span><span class="o">[</span>Added<span class="o">]</span><span class="w"> </span>Number<span class="w"> </span>of<span class="w"> </span>gNBs<span class="w"> </span>is<span class="w"> </span>now<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>../src/amf/context.c:1178<span class="o">)</span>
amf<span class="w">      </span><span class="p">|</span><span class="w"> </span><span class="m">04</span>/23<span class="w"> </span><span class="m">14</span>:38:26.459:<span class="w"> </span><span class="o">[</span>amf<span class="o">]</span><span class="w"> </span>INFO:<span class="w"> </span>gNB-N2<span class="o">[</span><span class="m">172</span>.22.0.1<span class="o">]</span><span class="w"> </span>max_num_of_ostreams<span class="w"> </span>:<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="o">(</span>../src/amf/amf-sm.c:780<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="id10">
<h4>Amarisoft UE<a class="headerlink" href="#id10" title="Link to this heading"></a></h4>
<p>Lastly we can launch the UE, with root permissions to create the TUN device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/root/ue/lteue<span class="w"> </span>/root/ue/config/ue-nr-sa-fdd-n7-zmq-single-ue.cfg
</pre></div>
</div>
<p>The above command should start the UE and attach it to the core network.</p>
<p>If UE connects successfully to the network, the following (or similar) should be displayed on the console:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>amariue<span class="w">  </span><span class="p">|</span><span class="w"> </span>RF0:<span class="w"> </span><span class="nv">sample_rate</span><span class="o">=</span><span class="m">61</span>.440<span class="w"> </span>MHz<span class="w"> </span><span class="nv">dl_freq</span><span class="o">=</span><span class="m">2680</span>.100<span class="w"> </span>MHz<span class="w"> </span><span class="nv">ul_freq</span><span class="o">=</span><span class="m">2560</span>.100<span class="w"> </span>MHz<span class="w"> </span><span class="o">(</span>band<span class="w"> </span>n7<span class="o">)</span><span class="w"> </span><span class="nv">dl_ant</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ul_ant</span><span class="o">=</span><span class="m">1</span>
amariue<span class="w">  </span><span class="p">|</span><span class="w"> </span><span class="o">(</span>ue<span class="o">)</span><span class="w"> </span>Cell<span class="w"> </span><span class="m">0</span>:<span class="w"> </span>SIB<span class="w"> </span>found
amariue<span class="w">  </span><span class="p">|</span><span class="w"> </span>UE<span class="w"> </span>PDN<span class="w"> </span>TUN<span class="w"> </span>iface<span class="w"> </span>requested:<span class="w"> </span>ue_id:<span class="w"> </span>ue1,<span class="w"> </span>pdn_id:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span>ifname:<span class="w"> </span>ue1-pdn0,<span class="w"> </span>ipv4_addr:<span class="w"> </span><span class="m">192</span>.168.100.2,<span class="w"> </span>ipv4_dns:<span class="w"> </span><span class="m">8</span>.8.4.4,<span class="w"> </span>ipv6_local_addr:<span class="w"> </span>,<span class="w"> </span>ipv6_dns:
amariue<span class="w">  </span><span class="p">|</span><span class="w"> </span>Created<span class="w"> </span>iface<span class="w"> </span>ue1-pdn0<span class="w"> </span>with<span class="w"> </span><span class="m">192</span>.168.100.2
</pre></div>
</div>
<p>It is clear that the connection has been made successfully once the UE has been assigned an IP, this is seen in <code class="docutils literal notranslate"><span class="pre">PDU</span> <span class="pre">Session</span> <span class="pre">Establishment</span> <span class="pre">successful.</span> <span class="pre">IP:</span> <span class="pre">192.168.100.2</span></code>.
The NR connection is then confirmed with the <code class="docutils literal notranslate"><span class="pre">RRC</span> <span class="pre">NR</span> <span class="pre">reconfiguration</span> <span class="pre">successful.</span></code> message.</p>
</section>
</section>
<section id="testing-the-network">
<h3>Testing the Network<a class="headerlink" href="#testing-the-network" title="Link to this heading"></a></h3>
<p>Here, we demonstrate how to use ping and iPerf3 tools to test the connectivity and throughput in the network.</p>
<section id="ping">
<h4>Ping<a class="headerlink" href="#ping" title="Link to this heading"></a></h4>
<p>To exchange traffic in the <code class="docutils literal notranslate"><span class="pre">downlink</span></code> direction, i.e. from the the 5GC (UPF), just run ping as usual on the command line, e.g.:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ping<span class="w"> </span><span class="m">192</span>.168.100.2
</pre></div>
</div>
<p>In order to generate traffic in the <code class="docutils literal notranslate"><span class="pre">uplink</span></code> direction it is important to run the ping command
using the TUN interface of UE (e.g. tun0 created once Amarisoft UE attaches to 5G network).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>ue0<span class="w"> </span>ping<span class="w"> </span><span class="m">192</span>.168.100.1<span class="w"> </span>-I<span class="w"> </span>tun0
</pre></div>
</div>
</section>
<section id="iperf">
<h4>iPerf<a class="headerlink" href="#iperf" title="Link to this heading"></a></h4>
<section id="downlink">
<h5>Downlink<a class="headerlink" href="#downlink" title="Link to this heading"></a></h5>
<p>For generating downlink traffic, we run iPerf client on the 5GC (UPF) and server on the UE as follows:</p>
<p>In the UE,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>ue0<span class="w"> </span>iperf<span class="w"> </span>-u<span class="w"> </span>-s<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>In the UPF,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>iperf<span class="w"> </span>-u<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.100.2<span class="w"> </span>-b<span class="w"> </span>5M<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span>-t<span class="w"> </span><span class="m">30</span>
</pre></div>
</div>
</section>
<section id="uplink">
<h5>Uplink<a class="headerlink" href="#uplink" title="Link to this heading"></a></h5>
<p>And, for uplink traffic, we run iPerf server on the 5GC (UPF) and client on the UE as follows.</p>
<p>In the UPF,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>iperf<span class="w"> </span>-u<span class="w"> </span>-s<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
<p>In the UE,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip<span class="w"> </span>netns<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>ue0<span class="w"> </span>iperf<span class="w"> </span>-u<span class="w"> </span>-c<span class="w"> </span><span class="m">192</span>.168.100.1<span class="w"> </span>-b<span class="w"> </span>5M<span class="w"> </span>-i<span class="w"> </span><span class="m">1</span><span class="w"> </span>-t<span class="w"> </span><span class="m">30</span>
</pre></div>
</div>
</section>
</section>
<section id="iperf-output">
<h4>iPerf Output<a class="headerlink" href="#iperf-output" title="Link to this heading"></a></h4>
<p>Example <code class="docutils literal notranslate"><span class="pre">server</span></code> iPerf3 output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------------------------------------------</span>
<span class="n">Server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Receiving</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">local</span> <span class="mf">192.168.100.1</span> <span class="n">port</span> <span class="mi">5001</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">192.168.100.3</span> <span class="n">port</span> <span class="mi">36039</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>        <span class="n">Jitter</span>   <span class="n">Lost</span><span class="o">/</span><span class="n">Total</span> <span class="n">Datagrams</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>   <span class="mi">629</span> <span class="n">KBytes</span>  <span class="mf">5.15</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">6.188</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">438</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>   <span class="mi">431</span> <span class="n">KBytes</span>  <span class="mf">3.53</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.656</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">300</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>   <span class="mi">866</span> <span class="n">KBytes</span>  <span class="mf">7.09</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.690</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">603</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>   <span class="mi">589</span> <span class="n">KBytes</span>  <span class="mf">4.82</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">8.544</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">410</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>   <span class="mi">693</span> <span class="n">KBytes</span>  <span class="mf">5.68</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.879</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">483</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>   <span class="mi">637</span> <span class="n">KBytes</span>  <span class="mf">5.22</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.583</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">444</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>   <span class="mi">500</span> <span class="n">KBytes</span>  <span class="mf">4.09</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">15.044</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">348</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>   <span class="mi">784</span> <span class="n">KBytes</span>  <span class="mf">6.42</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.792</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">546</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>   <span class="mi">637</span> <span class="n">KBytes</span>  <span class="mf">5.22</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">9.773</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">444</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">9.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">600</span> <span class="n">KBytes</span>  <span class="mf">4.92</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">10.407</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">418</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">10.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>   <span class="mi">683</span> <span class="n">KBytes</span>  <span class="mf">5.60</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.029</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">476</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">11.0</span><span class="o">-</span><span class="mf">12.0</span> <span class="n">sec</span>   <span class="mi">637</span> <span class="n">KBytes</span>  <span class="mf">5.22</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">11.048</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">444</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">12.0</span><span class="o">-</span><span class="mf">13.0</span> <span class="n">sec</span>   <span class="mi">643</span> <span class="n">KBytes</span>  <span class="mf">5.27</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.563</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">448</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">13.0</span><span class="o">-</span><span class="mf">14.0</span> <span class="n">sec</span>   <span class="mi">626</span> <span class="n">KBytes</span>  <span class="mf">5.13</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">3.593</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">436</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">14.0</span><span class="o">-</span><span class="mf">15.0</span> <span class="n">sec</span>   <span class="mi">593</span> <span class="n">KBytes</span>  <span class="mf">4.86</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">8.771</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">413</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">15.0</span><span class="o">-</span><span class="mf">16.0</span> <span class="n">sec</span>   <span class="mi">669</span> <span class="n">KBytes</span>  <span class="mf">5.48</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">1.940</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">466</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">16.0</span><span class="o">-</span><span class="mf">17.0</span> <span class="n">sec</span>   <span class="mi">501</span> <span class="n">KBytes</span>  <span class="mf">4.10</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">9.604</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">349</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">17.0</span><span class="o">-</span><span class="mf">18.0</span> <span class="n">sec</span>   <span class="mi">813</span> <span class="n">KBytes</span>  <span class="mf">6.66</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.372</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">566</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">18.0</span><span class="o">-</span><span class="mf">19.0</span> <span class="n">sec</span>   <span class="mi">637</span> <span class="n">KBytes</span>  <span class="mf">5.22</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.671</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">444</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">19.0</span><span class="o">-</span><span class="mf">20.0</span> <span class="n">sec</span>   <span class="mi">632</span> <span class="n">KBytes</span>  <span class="mf">5.17</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">3.903</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">440</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">20.0</span><span class="o">-</span><span class="mf">21.0</span> <span class="n">sec</span>   <span class="mi">606</span> <span class="n">KBytes</span>  <span class="mf">4.96</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.835</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">422</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">21.0</span><span class="o">-</span><span class="mf">22.0</span> <span class="n">sec</span>   <span class="mi">678</span> <span class="n">KBytes</span>  <span class="mf">5.55</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.643</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">472</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">22.0</span><span class="o">-</span><span class="mf">23.0</span> <span class="n">sec</span>   <span class="mi">649</span> <span class="n">KBytes</span>  <span class="mf">5.32</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.577</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">452</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">23.6</span> <span class="n">sec</span>  <span class="mf">14.7</span> <span class="n">MBytes</span>  <span class="mf">5.25</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">2.420</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span><span class="mi">10510</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Example <code class="docutils literal notranslate"><span class="pre">client</span></code> iPerf3 output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">192.168.100.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span><span class="p">,</span> <span class="n">IPG</span> <span class="n">target</span><span class="p">:</span> <span class="mf">2243.04</span> <span class="n">us</span> <span class="p">(</span><span class="n">kalman</span> <span class="n">adjust</span><span class="p">)</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">local</span> <span class="mf">192.168.100.3</span> <span class="n">port</span> <span class="mi">36039</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">192.168.100.1</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>   <span class="mi">642</span> <span class="n">KBytes</span>  <span class="mf">5.26</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>   <span class="mi">639</span> <span class="n">KBytes</span>  <span class="mf">5.23</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">9.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">10.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">11.0</span><span class="o">-</span><span class="mf">12.0</span> <span class="n">sec</span>   <span class="mi">639</span> <span class="n">KBytes</span>  <span class="mf">5.23</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">12.0</span><span class="o">-</span><span class="mf">13.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">13.0</span><span class="o">-</span><span class="mf">14.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">14.0</span><span class="o">-</span><span class="mf">15.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">15.0</span><span class="o">-</span><span class="mf">16.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">16.0</span><span class="o">-</span><span class="mf">17.0</span> <span class="n">sec</span>   <span class="mi">639</span> <span class="n">KBytes</span>  <span class="mf">5.23</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">17.0</span><span class="o">-</span><span class="mf">18.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">18.0</span><span class="o">-</span><span class="mf">19.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">19.0</span><span class="o">-</span><span class="mf">20.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="mf">20.0</span><span class="o">-</span><span class="mf">21.0</span> <span class="n">sec</span>   <span class="mi">640</span> <span class="n">KBytes</span>  <span class="mf">5.24</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
</pre></div>
</div>
</section>
<section id="gnb-console-output">
<h4>gNB Console Output<a class="headerlink" href="#gnb-console-output" title="Link to this heading"></a></h4>
<p>Following console output was taken while performing UL iperf test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----------------------</span><span class="n">DL</span><span class="o">----------------|------------------</span><span class="n">UL</span><span class="o">--------------------</span>
<span class="n">pci</span> <span class="n">rnti</span>  <span class="n">cqi</span>  <span class="n">mcs</span>  <span class="n">brate</span>   <span class="n">ok</span>  <span class="n">nok</span>  <span class="p">(</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span> <span class="n">pusch</span>  <span class="n">mcs</span>  <span class="n">brate</span>   <span class="n">ok</span>  <span class="n">nok</span>  <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="n">bsr</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">396</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">5.45</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>    <span class="mi">9</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">5.7</span><span class="n">M</span>  <span class="mi">253</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">10.6</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.2</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">5.8</span><span class="n">M</span>  <span class="mi">247</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">1.04</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">8.2</span><span class="n">M</span>  <span class="mi">351</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">6.4</span><span class="n">M</span>  <span class="mi">265</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">5.45</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">5.8</span><span class="n">M</span>  <span class="mi">255</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">5.45</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">5.0</span><span class="n">M</span>  <span class="mi">246</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>   <span class="mi">108</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">412</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">4.9</span><span class="n">M</span>  <span class="mi">234</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">7.59</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">9.3</span><span class="n">M</span>  <span class="mi">347</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">10.6</span><span class="n">k</span>
  <span class="mi">1</span> <span class="mi">4601</span>   <span class="mi">15</span>   <span class="mi">27</span>   <span class="mf">5.8</span><span class="n">k</span>   <span class="mi">10</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">65.5</span>   <span class="mi">28</span>   <span class="mf">6.7</span><span class="n">M</span>  <span class="mi">278</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>  <span class="mf">5.45</span><span class="n">k</span>
</pre></div>
</div>
</section>
<section id="packet-capture">
<h4>Packet Capture<a class="headerlink" href="#packet-capture" title="Link to this heading"></a></h4>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../../../_downloads/a4ef146e7bb75315e1e0dd2f6a949e77/gnb_zmq_ngap.pcap"><code class="xref download docutils literal notranslate"><span class="pre">NGAP</span> <span class="pre">packet</span> <span class="pre">capture</span> <span class="pre">of</span> <span class="pre">UE</span> <span class="pre">attach</span> <span class="pre">scenario</span></code></a></p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="configuring-amarisoft-for-multiple-ues">
<h3>Configuring Amarisoft for multiple UEs<a class="headerlink" href="#configuring-amarisoft-for-multiple-ues" title="Link to this heading"></a></h3>
<p>The following config files were modified for simulating multiple UEs:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../../../_downloads/2a393cd202a4651ff2a16f5b7b80cfa4/ue-nr-sa-fdd-n7-zmq-multiple-ues.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Multiple</span> <span class="pre">UEs</span> <span class="pre">config</span> <span class="pre">FDD</span> <span class="pre">band</span> <span class="pre">7</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/b1c8d795f0d7deef2005a0eac4b50fdf/ue-nr-sa-tdd-n78-zmq-multiple-ues.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Multiple</span> <span class="pre">UEs</span> <span class="pre">config</span> <span class="pre">TDD</span> <span class="pre">band</span> <span class="pre">78</span></code></a></p></li>
</ul>
</div></blockquote>
<p>The main modifications needed are:</p>
<blockquote>
<div><ul>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">multi_ue</span></code> to true.</p></li>
<li><p>Add multiple entries with UE details (IMSI, K, OPc etc.) under <code class="docutils literal notranslate"><span class="pre">ue_list</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">global_timing_advance:</span> <span class="pre">0</span></code> in the cell entry under <code class="docutils literal notranslate"><span class="pre">cells</span></code> section.</p></li>
<li><p>Add the following configuration under each entry in <code class="docutils literal notranslate"><span class="pre">ue_list</span></code> and increase the value of <code class="docutils literal notranslate"><span class="pre">start_time</span></code> for each UE to have a staggered UE bring up.</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">sim_events</span><span class="o">:</span><span class="w"> </span><span class="s">[</span>
<span class="w">  </span><span class="na">{</span>
<span class="w">    </span><span class="na">event</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;power_on&quot;,</span>
<span class="w">    </span><span class="na">start_time</span><span class="o">:</span><span class="w"> </span><span class="s">0,</span>
<span class="w">  </span><span class="na">},</span>
<span class="na">]</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code class="docutils literal notranslate"><span class="pre">multi_ue</span></code> to false, make sure to have only one entry in <code class="docutils literal notranslate"><span class="pre">ue_list</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure to configure all the subscribers through the Open5GS WebUI, before attempting to attach UEs.</p>
</div>
<hr class="docutils" />
</section>
</section>
<section id="over-the-air-setup">
<span id="amariue-radios"></span><h2>Over-the-air Setup<a class="headerlink" href="#over-the-air-setup" title="Link to this heading"></a></h2>
<p>In this section, we describe the steps required to configure the SDR RF driver in both gNB and Amarisoft UE.
The following diagram presents the setup architecture:</p>
<figure class="align-center">
<img alt="../../../../_images/usrp_amariue.png" src="../../../../_images/usrp_amariue.png" />
</figure>
<section id="id11">
<h3>Configuration<a class="headerlink" href="#id11" title="Link to this heading"></a></h3>
<p>You can find the srsRAN Project gNB configuration file for this example in the <code class="docutils literal notranslate"><span class="pre">configs</span></code> folder of the srsRAN Project source files. You can also find it <a class="reference external" href="https://github.com/srsran/srsRAN_Project/tree/main/configs">here</a>.</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/srsran/srsRAN_Project/blob/main/configs/gnb_rf_b200_tdd_n78_20mhz.yml">gNB TDD band 78 config</a></p></li>
</ul>
</div></blockquote>
<p>You can download the AmariUE configs here:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../../../_downloads/f01dbb7e62e54bbf86b455476b210b7e/ue-nr-sa-fdd-n7-b210-single-ue.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Single</span> <span class="pre">UE</span> <span class="pre">config</span> <span class="pre">FDD</span> <span class="pre">band</span> <span class="pre">7</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../../../../_downloads/23cdc884b34de736278aeffea1d4d8fd/ue-nr-sa-tdd-n78-b210-single-ue.cfg"><code class="xref download docutils literal notranslate"><span class="pre">Single</span> <span class="pre">UE</span> <span class="pre">config</span> <span class="pre">TDD</span> <span class="pre">band</span> <span class="pre">78</span></code></a></p></li>
</ul>
</div></blockquote>
<p>Details of the modifications made compared to ZMQ setup are outlined in following sections.</p>
<section id="id12">
<h4>srsRAN Project gNB<a class="headerlink" href="#id12" title="Link to this heading"></a></h4>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">ru_sdr</span></code> section to send and receive radio samples via UHD driver:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ru_sdr</span><span class="p">:</span>
<span class="w">  </span><span class="nt">device_driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uhd</span>
<span class="w">  </span><span class="nt">device_args</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">type=b200,num_recv_frames=64,num_send_frames=64</span>
<span class="w">  </span><span class="nt">srate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11.52</span>
<span class="w">  </span><span class="nt">otw_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sc12</span>
<span class="w">  </span><span class="nt">tx_gain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
<span class="w">  </span><span class="nt">rx_gain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
</pre></div>
</div>
</section>
<section id="id13">
<h4>Amarisoft UE<a class="headerlink" href="#id13" title="Link to this heading"></a></h4>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">ru_sdr</span></code> section of Amarisoft UE configuration to send and receive radio samples via UHD driver:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">ru_sdr</span><span class="o">:</span><span class="w"> </span><span class="s">{</span>
<span class="w">    </span><span class="na">name</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;uhd&quot;,</span>
<span class="w">    </span><span class="na">sync</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;none&quot;,</span>
<span class="c1">#if CELL_BANDWIDTH &lt; 5</span>
<span class="w">    </span><span class="na">args</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;send_frame_size=512,recv_frame_size=512&quot;,</span>
<span class="c1">#elif CELL_BANDWIDTH == 5</span>
<span class="w">    </span><span class="na">args</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;send_frame_size=1024,recv_frame_size=1024&quot;,</span>
<span class="c1">#elif CELL_BANDWIDTH == 10</span>
<span class="w">    </span><span class="na">args</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;&quot;,</span>
<span class="c1">#elif CELL_BANDWIDTH &gt; 10</span>
<span class="w">    </span><span class="na">args</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;num_recv_frames=64,num_send_frames=64&quot;,</span>
<span class="w">    </span><span class="na">dl_sample_bits</span><span class="o">:</span><span class="w"> </span><span class="s">12,</span>
<span class="w">    </span><span class="na">ul_sample_bits</span><span class="o">:</span><span class="w"> </span><span class="s">12,</span>
<span class="c1">#endif</span>
<span class="w">    </span><span class="na">rx_antenna</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;rx&quot;,</span>
<span class="na">},</span>
</pre></div>
</div>
<p>Then, set the gain parameters and timing offset as follows:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="na">tx_gain</span><span class="o">:</span><span class="w"> </span><span class="s">75.0, /* TX gain (in dB) B2x0: 0 to 89.8 dB */</span>
<span class="na">rx_gain</span><span class="o">:</span><span class="w"> </span><span class="s">40.0, /* RX gain (in dB) B2x0: 0 to 73 dB */</span>
<span class="na">tx_time_offset</span><span class="o">:</span><span class="w"> </span><span class="s">-150, /* in samples */</span>
</pre></div>
</div>
<p>Make sure the CELL_BANDWIDTH matches that on gNB configuration file:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1">#define CELL_BANDWIDTH 10</span>
</pre></div>
</div>
<p>Then, set <code class="docutils literal notranslate"><span class="pre">N_ANTENNA_DL</span></code> to 1:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1">#define N_ANTENNA_DL 1</span>
</pre></div>
</div>
</section>
</section>
<section id="id14">
<h3>Running the 5G Network<a class="headerlink" href="#id14" title="Link to this heading"></a></h3>
<p>The following order should be used when running the network:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>5GC</p></li>
<li><p>gNB</p></li>
<li><p>UE</p></li>
</ol>
</div></blockquote>
<section id="id15">
<h4>Open5gs 5G Core<a class="headerlink" href="#id15" title="Link to this heading"></a></h4>
<p>Running the 5GC is same as in the ZMQ based setup.</p>
</section>
<section id="id16">
<h4>srsRAN Project gNB<a class="headerlink" href="#id16" title="Link to this heading"></a></h4>
<p>Let’s now launch the gNB from its build directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./apps/gnb/gnb<span class="w"> </span>-c<span class="w"> </span>gnb_rf_b210_tdd_n78_10mhz.yml
</pre></div>
</div>
<p>The console output should be similar as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Available<span class="w"> </span>radio<span class="w"> </span>types:<span class="w"> </span>uhd<span class="w"> </span>and<span class="w"> </span>zmq.

--<span class="o">==</span><span class="w"> </span>srsRAN<span class="w"> </span>gNB<span class="w"> </span><span class="o">(</span>commit<span class="w"> </span>87c3fe355<span class="o">)</span><span class="w"> </span><span class="o">==</span>--

Connecting<span class="w"> </span>to<span class="w"> </span>AMF<span class="w"> </span>on<span class="w"> </span><span class="m">172</span>.22.0.10:38412
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>UHD<span class="o">]</span><span class="w"> </span>linux<span class="p">;</span><span class="w"> </span>GNU<span class="w"> </span>C++<span class="w"> </span>version<span class="w"> </span><span class="m">11</span>.3.0<span class="p">;</span><span class="w"> </span>Boost_107400<span class="p">;</span><span class="w"> </span>UHD_4.4.0.0-0ubuntu1~jammy1
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>LOGGING<span class="o">]</span><span class="w"> </span>Fastpath<span class="w"> </span>logging<span class="w"> </span>disabled<span class="w"> </span>at<span class="w"> </span>runtime.
Making<span class="w"> </span>USRP<span class="w"> </span>object<span class="w"> </span>with<span class="w"> </span>args<span class="w"> </span><span class="s1">&#39;type=b200&#39;</span>
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Detected<span class="w"> </span>Device:<span class="w"> </span>B210
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Operating<span class="w"> </span>over<span class="w"> </span>USB<span class="w"> </span><span class="m">3</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Initialize<span class="w"> </span>CODEC<span class="w"> </span>control...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Initialize<span class="w"> </span>Radio<span class="w"> </span>control...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Performing<span class="w"> </span>register<span class="w"> </span>loopback<span class="w"> </span>test...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Register<span class="w"> </span>loopback<span class="w"> </span><span class="nb">test</span><span class="w"> </span>passed
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Performing<span class="w"> </span>register<span class="w"> </span>loopback<span class="w"> </span>test...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Register<span class="w"> </span>loopback<span class="w"> </span><span class="nb">test</span><span class="w"> </span>passed
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Setting<span class="w"> </span>master<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span>selection<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;automatic&#39;</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Asking<span class="w"> </span><span class="k">for</span><span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">16</span>.000000<span class="w"> </span>MHz...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Actually<span class="w"> </span>got<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">16</span>.000000<span class="w"> </span>MHz.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>MULTI_USRP<span class="o">]</span><span class="w"> </span>Setting<span class="w"> </span>master<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span>selection<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;manual&#39;</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Asking<span class="w"> </span><span class="k">for</span><span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">11</span>.520000<span class="w"> </span>MHz...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Actually<span class="w"> </span>got<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">11</span>.520000<span class="w"> </span>MHz.
Cell<span class="w"> </span><span class="nv">pci</span><span class="o">=</span><span class="m">1</span>,<span class="w"> </span><span class="nv">bw</span><span class="o">=</span><span class="m">10</span><span class="w"> </span>MHz,<span class="w"> </span><span class="nv">dl_arfcn</span><span class="o">=</span><span class="m">632628</span><span class="w"> </span><span class="o">(</span>n78<span class="o">)</span>,<span class="w"> </span><span class="nv">dl_freq</span><span class="o">=</span><span class="m">3489</span>.42<span class="w"> </span>MHz,<span class="w"> </span><span class="nv">dl_ssb_arfcn</span><span class="o">=</span><span class="m">632640</span>,<span class="w"> </span><span class="nv">ul_freq</span><span class="o">=</span><span class="m">3489</span>.42<span class="w"> </span><span class="nv">MHz</span>

<span class="o">====</span><span class="w"> </span>gNodeB<span class="w"> </span><span class="nv">started</span><span class="w"> </span><span class="o">===</span>
Type<span class="w"> </span>&lt;t&gt;<span class="w"> </span>to<span class="w"> </span>view<span class="w"> </span>trace
</pre></div>
</div>
</section>
<section id="id17">
<h4>Amarisoft UE<a class="headerlink" href="#id17" title="Link to this heading"></a></h4>
<p>Lastly we can launch the UE, with root permissions to create the TUN device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/root/ue/lteue<span class="w"> </span>/root/ue/config/ue-nr-sa-tdd-n78-b210-single-ue.cfg
</pre></div>
</div>
<p>The above command should start the UE and attach it to the core network.
If UE connects successfully to the network, the following (or similar) should be displayed on the console:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>UHD<span class="o">]</span><span class="w"> </span>linux<span class="p">;</span><span class="w"> </span>GNU<span class="w"> </span>C++<span class="w"> </span>version<span class="w"> </span><span class="m">9</span>.2.1<span class="w"> </span><span class="m">20200304</span><span class="p">;</span><span class="w"> </span>Boost_107100<span class="p">;</span><span class="w"> </span>UHD_3.15.0.0-2build5
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>MPMD<span class="w"> </span>FIND<span class="o">]</span><span class="w"> </span>Found<span class="w"> </span>MPM<span class="w"> </span>devices,<span class="w"> </span>but<span class="w"> </span>none<span class="w"> </span>are<span class="w"> </span>reachable<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>UHD<span class="w"> </span>session.<span class="w"> </span>Specify<span class="w"> </span>find_all<span class="w"> </span>to<span class="w"> </span>find<span class="w"> </span>all<span class="w"> </span>devices.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Detected<span class="w"> </span>Device:<span class="w"> </span>B210
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Operating<span class="w"> </span>over<span class="w"> </span>USB<span class="w"> </span><span class="m">3</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Initialize<span class="w"> </span>CODEC<span class="w"> </span>control...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Initialize<span class="w"> </span>Radio<span class="w"> </span>control...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Performing<span class="w"> </span>register<span class="w"> </span>loopback<span class="w"> </span>test...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Register<span class="w"> </span>loopback<span class="w"> </span><span class="nb">test</span><span class="w"> </span>passed
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Performing<span class="w"> </span>register<span class="w"> </span>loopback<span class="w"> </span>test...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Register<span class="w"> </span>loopback<span class="w"> </span><span class="nb">test</span><span class="w"> </span>passed
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Setting<span class="w"> </span>master<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span>selection<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;automatic&#39;</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Asking<span class="w"> </span><span class="k">for</span><span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">16</span>.000000<span class="w"> </span>MHz...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Actually<span class="w"> </span>got<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">16</span>.000000<span class="w"> </span>MHz.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>MULTI_USRP<span class="o">]</span><span class="w"> </span>Setting<span class="w"> </span>master<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span>selection<span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;manual&#39;</span>.
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Asking<span class="w"> </span><span class="k">for</span><span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">11</span>.520000<span class="w"> </span>MHz...
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>B200<span class="o">]</span><span class="w"> </span>Actually<span class="w"> </span>got<span class="w"> </span>clock<span class="w"> </span>rate<span class="w"> </span><span class="m">11</span>.520000<span class="w"> </span>MHz.
RF0:<span class="w"> </span><span class="nv">sample_rate</span><span class="o">=</span><span class="m">11</span>.520<span class="w"> </span>MHz<span class="w"> </span><span class="nv">dl_freq</span><span class="o">=</span><span class="m">3489</span>.420<span class="w"> </span>MHz<span class="w"> </span><span class="nv">ul_freq</span><span class="o">=</span><span class="m">3489</span>.420<span class="w"> </span>MHz<span class="w"> </span><span class="o">(</span>band<span class="w"> </span>n78<span class="o">)</span><span class="w"> </span><span class="nv">dl_ant</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ul_ant</span><span class="o">=</span><span class="m">1</span>
<span class="o">(</span>ue<span class="o">)</span><span class="w"> </span>Warning:<span class="w"> </span>config/ru_sdr/config_tdd.cfg:25:<span class="w"> </span>unused<span class="w"> </span>property<span class="w"> </span><span class="s1">&#39;tx_time_offset&#39;</span>
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>MULTI_USRP<span class="o">]</span><span class="w">     </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>catch<span class="w"> </span><span class="nb">time</span><span class="w"> </span>transition<span class="w"> </span>at<span class="w"> </span>pps<span class="w"> </span>edge
<span class="o">[</span>INFO<span class="o">]</span><span class="w"> </span><span class="o">[</span>MULTI_USRP<span class="o">]</span><span class="w">     </span><span class="m">2</span><span class="o">)</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="nb">times</span><span class="w"> </span>next<span class="w"> </span>pps<span class="w"> </span><span class="o">(</span>synchronously<span class="o">)</span>
Chan<span class="w"> </span>Gain<span class="o">(</span>dB<span class="o">)</span><span class="w">   </span>Freq<span class="o">(</span>MHz<span class="o">)</span>
<span class="w"> </span>TX1<span class="w">     </span><span class="m">70</span>.0<span class="w"> </span><span class="m">3489</span>.420000
<span class="w"> </span>RX1<span class="w">     </span><span class="m">40</span>.0<span class="w"> </span><span class="m">3489</span>.420000
Cell<span class="w"> </span><span class="m">0</span>:<span class="w"> </span>SIB<span class="w"> </span>found
</pre></div>
</div>
<p>And, once connected you can use the Amarisoft UE command line tool to verify whether its attached to cell as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>ue<span class="o">)</span><span class="w"> </span>cells
Cell<span class="w"> </span><span class="c1">#0 / NR:</span>
<span class="w">  </span>PCI:<span class="w">    </span><span class="m">1</span>
<span class="w">  </span>TDD:<span class="w">    </span><span class="nv">config</span><span class="o">=</span><span class="m">0</span>,<span class="w"> </span><span class="nv">ssf</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span>EARFCN:<span class="w"> </span><span class="nv">DL</span><span class="o">=</span><span class="m">632628</span><span class="w"> </span><span class="nv">UL</span><span class="o">=</span><span class="m">632628</span>
<span class="w">  </span>RB:<span class="w">     </span><span class="nv">DL</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="nv">UL</span><span class="o">=</span><span class="m">24</span>
</pre></div>
</div>
<p>It is clear that the connection has been made successfully once the UE has been assigned an IP, this is seen in <code class="docutils literal notranslate"><span class="pre">PDU</span> <span class="pre">Session</span> <span class="pre">Establishment</span> <span class="pre">successful.</span> <span class="pre">IP:</span> <span class="pre">192.168.100.2</span></code>.
The NR connection is then confirmed with the <code class="docutils literal notranslate"><span class="pre">RRC</span> <span class="pre">NR</span> <span class="pre">reconfiguration</span> <span class="pre">successful.</span></code> message.</p>
</section>
</section>
<section id="amariue-radios-test">
<span id="id18"></span><h3>Testing the Network<a class="headerlink" href="#amariue-radios-test" title="Link to this heading"></a></h3>
<p>Here, we demonstrate how to use ping and iPerf3 tools to test the connectivity and throughput in the network.</p>
<section id="id19">
<h4>Ping<a class="headerlink" href="#id19" title="Link to this heading"></a></h4>
<p>To exchange traffic in the <code class="docutils literal notranslate"><span class="pre">downlink</span></code> direction, i.e. from the the 5GC (UPF), just run ping as usual on the command line, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span> <span class="mf">192.168.100.2</span>
</pre></div>
</div>
<p>In order to generate traffic in the <code class="docutils literal notranslate"><span class="pre">uplink</span></code> direction it is important to run the ping command
using the TUN interface of UE (e.g. tun0 created once Amarisoft UE attaches to 5G network).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">netns</span> <span class="n">exec</span> <span class="n">ue0</span> <span class="n">ping</span> <span class="mf">192.168.100.1</span> <span class="o">-</span><span class="n">I</span> <span class="n">tun0</span>
</pre></div>
</div>
</section>
<section id="id20">
<h4>iPerf<a class="headerlink" href="#id20" title="Link to this heading"></a></h4>
<p>For generating <code class="docutils literal notranslate"><span class="pre">downlink</span></code> traffic, we run iperf client on the 5GC (UPF) and server on the UE as follows:</p>
<p>In the UE,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">netns</span> <span class="n">exec</span> <span class="n">ue0</span> <span class="n">iperf</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span>
</pre></div>
</div>
<p>In the UPF,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iperf</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="mf">192.168.100.2</span> <span class="o">-</span><span class="n">b</span> <span class="mi">10</span><span class="n">M</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span>
</pre></div>
</div>
<p>And, for <code class="docutils literal notranslate"><span class="pre">uplink</span></code> traffic, we run iperf server on the 5GC (UPF) and client on the UE as follows.</p>
<p>In the UPF,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">iperf</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span>
</pre></div>
</div>
<p>In the UE,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ip</span> <span class="n">netns</span> <span class="n">exec</span> <span class="n">ue0</span> <span class="n">iperf</span> <span class="o">-</span><span class="n">u</span> <span class="o">-</span><span class="n">c</span> <span class="mf">192.168.100.1</span> <span class="o">-</span><span class="n">b</span> <span class="mi">3</span><span class="n">M</span> <span class="o">-</span><span class="n">i</span> <span class="mi">1</span> <span class="o">-</span><span class="n">t</span> <span class="mi">60</span>
</pre></div>
</div>
</section>
<section id="id21">
<h4>iPerf Output<a class="headerlink" href="#id21" title="Link to this heading"></a></h4>
<p>Example <code class="docutils literal notranslate"><span class="pre">server</span></code> iPerf3 output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------------------------------------------</span>
<span class="n">Server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Receiving</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span> <span class="mf">32.0</span> <span class="n">MByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.45.0.52</span> <span class="n">port</span> <span class="mi">5001</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.45.0.1</span> <span class="n">port</span> <span class="mi">33894</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>        <span class="n">Jitter</span>   <span class="n">Lost</span><span class="o">/</span><span class="n">Total</span> <span class="n">Datagrams</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.838</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">893</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.909</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">892</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.839</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">891</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.905</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">892</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.871</span> <span class="n">ms</span>    <span class="mi">3</span><span class="o">/</span>  <span class="mi">892</span> <span class="p">(</span><span class="mf">0.34</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.878</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">891</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.922</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">892</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.921</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">892</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.842</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">891</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mf">12.5</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.932</span> <span class="n">ms</span>    <span class="mi">3</span><span class="o">/</span> <span class="mi">8917</span> <span class="p">(</span><span class="mf">0.034</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Example <code class="docutils literal notranslate"><span class="pre">client</span></code> iPerf3 output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.45.0.52</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span><span class="p">,</span> <span class="n">IPG</span> <span class="n">target</span><span class="p">:</span> <span class="mf">1121.52</span> <span class="n">us</span> <span class="p">(</span><span class="n">kalman</span> <span class="n">adjust</span><span class="p">)</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span> <span class="mf">32.0</span> <span class="n">MByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.45.0.1</span> <span class="n">port</span> <span class="mi">33894</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.45.0.52</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>  <span class="mf">1.25</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mf">12.5</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">8917</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">3</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mf">12.5</span> <span class="n">MBytes</span>  <span class="mf">10.5</span> <span class="n">Mbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.931</span> <span class="n">ms</span>    <span class="mi">3</span><span class="o">/</span> <span class="mi">8917</span> <span class="p">(</span><span class="mf">0.034</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id22">
<h4>gNB Console Output<a class="headerlink" href="#id22" title="Link to this heading"></a></h4>
<p>Following console output was taken while performing DL iperf test:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----------------------</span><span class="n">DL</span><span class="o">----------------|------------------</span><span class="n">UL</span><span class="o">--------------------</span>
<span class="n">pci</span> <span class="n">rnti</span>  <span class="n">cqi</span>  <span class="n">mcs</span>  <span class="n">brate</span>   <span class="n">ok</span>  <span class="n">nok</span>  <span class="p">(</span><span class="o">%</span><span class="p">)</span> <span class="o">|</span> <span class="n">pusch</span>  <span class="n">mcs</span>  <span class="n">brate</span>   <span class="n">ok</span>  <span class="n">nok</span>  <span class="p">(</span><span class="o">%</span><span class="p">)</span>    <span class="n">bsr</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span> <span class="o">-</span><span class="mf">21.3</span>    <span class="mi">0</span>   <span class="mf">3.0</span><span class="n">k</span>    <span class="mi">0</span>    <span class="mi">5</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">973</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">976</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">976</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">973</span>    <span class="mi">9</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">27.4</span>   <span class="mi">28</span>   <span class="mf">4.4</span><span class="n">k</span>    <span class="mi">1</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">973</span>    <span class="mi">1</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">28.5</span>   <span class="mi">28</span>   <span class="mf">4.4</span><span class="n">k</span>    <span class="mi">1</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span> <span class="o">-</span><span class="mf">21.0</span>    <span class="mi">0</span>   <span class="mf">3.0</span><span class="n">k</span>    <span class="mi">0</span>    <span class="mi">5</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">980</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">30.3</span>   <span class="mi">28</span>   <span class="mf">4.4</span><span class="n">k</span>    <span class="mi">1</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">972</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>    <span class="mi">11</span><span class="n">M</span>  <span class="mi">976</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4601</span>    <span class="mi">4</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>   <span class="n">n</span><span class="o">/</span><span class="n">a</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mi">0</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span>    <span class="mf">0.0</span>
  <span class="mi">1</span> <span class="mi">4602</span>   <span class="mi">15</span>   <span class="mi">28</span>   <span class="mf">8.1</span><span class="n">M</span>  <span class="mi">732</span>    <span class="mi">0</span>   <span class="mi">0</span><span class="o">%</span> <span class="o">|</span>  <span class="mf">25.9</span>   <span class="mi">28</span>   <span class="mi">414</span><span class="n">k</span>   <span class="mi">43</span>    <span class="mi">4</span>   <span class="mi">8</span><span class="o">%</span>    <span class="mf">0.0</span>
</pre></div>
</div>
</section>
<section id="id23">
<h4>Packet Capture<a class="headerlink" href="#id23" title="Link to this heading"></a></h4>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference download internal" download="" href="../../../../_downloads/ec2d7b1a4d24ca108a3633db29806b12/gnb_ngap_rf_b210.pcap"><code class="xref download docutils literal notranslate"><span class="pre">NGAP</span> <span class="pre">packet</span> <span class="pre">capture</span> <span class="pre">of</span> <span class="pre">UE</span> <span class="pre">attach</span> <span class="pre">scenario</span></code></a></p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>
<hr class="docutils" />
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="zmq-setup">
<h3>ZMQ setup<a class="headerlink" href="#zmq-setup" title="Link to this heading"></a></h3>
<p>Amarisoft UE in ZMQ based setup may not connect to srsRAN Project gNB if the time between gNB bring up and UE bring up too large. So its advised to run immediately after running gNB for better results.</p>
</section>
<section id="reference-clock-for-over-the-air">
<h3>Reference clock for over-the-air<a class="headerlink" href="#reference-clock-for-over-the-air" title="Link to this heading"></a></h3>
<p>If you encounter issues with the srsUE not finding the cell and/or not being able to stay connected it might be due to inaccurate clocks at the RF frontends. Try to use an external 10 MHz reference or use a GPSDO oscillator.</p>
</section>
<section id="g-qos-identifier">
<h3>5G QoS Identifier<a class="headerlink" href="#g-qos-identifier" title="Link to this heading"></a></h3>
<p>By default, Open5GS uses 5QI = 9. If the <strong>qos</strong> section is not provided in the gNB config file, the default one with 5QI = 9 will be generated and the UE should connect to the network. If one needs to change the 5QI, please harmonize these settings between gNB and Open5GS config files, as otherwise, a UE will not be able to connect.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../cotsUE/source/index.html" class="btn btn-neutral float-left" title="srsRAN gNB with COTS UEs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../k8s/source/index.html" class="btn btn-neutral float-right" title="srsRAN gNB on Kubernetes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024, Software Radio Systems..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>